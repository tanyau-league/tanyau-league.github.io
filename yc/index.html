<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>Yauchann | TanYauLEAGUE</title>
		<link rel="icon" href="main.ico">
		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100;300;500;700;900&display=swap"
			rel="stylesheet">
		<link
			href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
			rel="stylesheet">
		<style>
			html,body{
				overflow: hidden;
			}
			*{
				padding: 0;
				margin: 0;
				font-family: 'Noto Sans SC';
				color: black;
			}
			body>ol{
				list-style: none;
			}
			body>ol>li{
				position: absolute;
			}
			body>ol>li>div{
				height: 100vh;
				width: 100vw;
				background: white;
			}
			#mainpage img{
				display: block;
				margin: 0 auto;
				height: 10vh;
				padding-top: 5vh;
			}
			#mainpage h1{
				font-family: 'Kanit';
				font-weight: 100;
				text-align: center;
				font-size: 10vh;
				padding-top: 10vh;
				line-height: 8vh;
			}
			#mainpage p{
				font-weight: 100;
				text-align: center;
				font-size: 5vh;
				padding-bottom: 3vh;
			}
			#mainpage button{
				background: #eee;
				display: block;
				margin: 0 auto;
				font-size: 5vh;
				font-weight: 100;
				border: 0.1vh black solid;
				padding: 8vh 10vh;
			}
			#mainpage span{
				display: block;
				text-align: center;
				font-weight: 100;
				font-size: 3vh;
				padding: 2vh;
			}
			#game button.reach{
				width: 50vh;
				height:6vh;
				background: #eee;
				border: 0.1vh black solid;
				font-size: 4vh;
				line-height: 6vh;
				font-weight: 500;
				display: block;
			}
			#game .kaze{
				font-size: 4vh;
				padding-right: 2vh;
			}
			#game input{
				font-size: 3vh;
				height: 4vh;
				line-height: 4vh;
				text-align: center;
				width: 40vh;
			}
			#game h1{
				text-align: center;
				font-size: 10vh;
			}
			#game button.tsumo,button.agari{
				height: 6vh;
				font-size: 4vh;
				line-height: 6vh;
				width: 20vh;
				border: 0.1vh black solid;
				margin-bottom: 1vh;
				color: white;
			}
			#game button.tsumo{
				background: #e40;
			}
			#game button.agari{
				background: #e81;
				margin-left: 10vh;
			}
			#game .jicha{
				width: 50vh;
				position: absolute;
				bottom: 0;
				left: 50%;
				margin-left: -25vh;
			}
			#game .toicha{
				width: 50vh;
				position: absolute;
				top: 0;
				left: 50%;
				margin-left: -25vh;
				rotate: 180deg; 
			}
			#game .kamicha{
				width: 50vh;
				position: absolute;
				left: -5vh;
				top: 50%;
				margin-top: -16vh;
				rotate: 90deg; 
			}
			#game .shimocha{
				width: 50vh;
				position: absolute;
				right: -5vh;
				top: 50%;
				margin-top: -16vh;
				rotate: -90deg; 
			}
			#game .naka{
				height: 30vh;
				width: 30vh;
				position: absolute;
				top: 50%;
				left: 50%;
				margin-top: -15vh;
				margin-left: -15vh;
				background: #eee;
				border: 0.1vh black solid;
				
			}
			#game .naka p{
				text-align: center;
				font-size: 4vh;
			}
			#game .naka p#honnba{
				margin-top: 6vh;
			}
			#game .naka button{
				font-size: 4vh;
				padding: 1vh 4vh;
				display: block;
				margin: 0 auto;
				margin-top: 1vh;
				background: #458;
				color: white;
				border: none;
			}
		</style>
	</head>
	<body>
		<ol>
			<li>
				<div id="mainpage">
					<img src="Group 1.svg" alt="">
					<h1>Yauchann</h1>
					<p>立直麻将对局计分</p>
					<button onclick="wap(1)">开始</button>
					<span>在平板上获得更好的使用体验<br>by Haraki</span>
				</div>
			</li>
			<li>
				<div id="game">
					<div class="jicha">
						<h1>25000</h1>
						<button class="tsumo">自摸</button><button class="agari">荣和</button>
						<button class="reach" onclick="reach(1)">立直</button>
						<span class="kaze">東</span><input placeholder="请输入选手名">
					</div>
					<div class="shimocha">
						<h1>25000</h1>
						<button class="tsumo">自摸</button><button class="agari">荣和</button>
						<button class="reach" onclick="reach(2)">立直</button>
						<span class="kaze">南</span><input placeholder="请输入选手名">
					</div>
					<div class="toicha">
						<h1>25000</h1>
						<button class="tsumo">自摸</button><button class="agari">荣和</button>
						<button class="reach" onclick="reach(3)">立直</button>
						<span class="kaze">西</span><input placeholder="请输入选手名">
					</div>
					<div class="kamicha">
						<h1>25000</h1>
						<button class="tsumo">自摸</button><button class="agari">荣和</button>
						<button class="reach" onclick="reach(4)">立直</button>
						<span class="kaze">北</span><input placeholder="请输入选手名">
					</div>
					<div class="naka">
						<p id="honnba">东一局 0 本场</p>
						<p id="kyoutaku">立直棒 0</p>
						<button>流局</button>
					</div>
				</div>
			</li>
		</ol>
	</body>
	<script type="text/javascript">
		const all_pages=document.querySelectorAll("body>ol>li")
		var score=[0,25000,25000,25000,25000];
		var kyoutaku=0;
		var round=1,honnba=0;
		var elem_honnba=document.getElementById("honnba"),elem_kyoutaku=document.getElementById("kyoutaku");
		var elem_player=document.querySelectorAll(".jicha,.shimocha,.toicha,.kamicha");
		var reached=[0,0,0,0,0];
		function wap(n){
			if(n==1){
				refresh_data()
			}
			for(let i=0;i<all_pages.length;i++){
				if(i==n){
					all_pages[i].style.display="block";
				}else{
					all_pages[i].style.display="none";
				}
			}
			
		}
		function refresh_data(){
			var kaze="东";
			if(round>4)kaze="南";
			elem_honnba.innerText=kaze+((round-1)%4+1)+"局 "+honnba+" 本场";
			elem_kyoutaku.innerText="立直棒 "+kyoutaku;
			for(let i=1;i<=4;i++){
				elem_player[i-1].querySelector("h1").innerText=score[i];
			}
		}
		function reach(n){
			if(!reached[n]){
				score[n]-=1000;
				kyoutaku++;
				reached[n]=1;
				elem_player[n-1].querySelector(".reach").innerText="●";
				elem_player[n-1].querySelector(".reach").style.color="red";
				elem_player[n-1].querySelector(".reach").style.borderRadius="3vh";
				elem_player[n-1].querySelector(".reach").style.fontSize="3vh";
				refresh_data();
			}else{
				score[n]+=1000;
				kyoutaku--;
				reached[n]=0;
				elem_player[n-1].querySelector(".reach").innerText="立直";
				elem_player[n-1].querySelector(".reach").style.color="black";
				elem_player[n-1].querySelector(".reach").style.borderRadius="none";
				elem_player[n-1].querySelector(".reach").style.fontSize="4vh";
				refresh_data();
			}
		}
		wap(1)
		 window.onload=function () {
			document.addEventListener('touchstart',function (event) {
			  if(event.touches.length>1){
				event.preventDefault();
			  }
			});
			var lastTouchEnd=0;
			document.addEventListener('touchend',function (event) {
			  var now=(new Date()).getTime();
			  if(now-lastTouchEnd<=300){
				event.preventDefault();
			  }
			  lastTouchEnd=now;
			},false);
			document.addEventListener('gesturestart', function (event) {
			  event.preventDefault();
			});
		  }
	</script>
</html>
